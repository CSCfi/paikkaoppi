<div class="view">
  <div class="view__header">
    <h1 class="view__header-title">Omat tehtävät</h1><a routerLink="/library" class="view__add">Uusi tehtävä</a>
  </div>
  <div class="view__content">
    <div class="view__columns">
      <div class="view__column">
        <!--<h1 class="title__list">Omat tehtävät</h1>-->
        <div class="list type--tasks">
          <div class="list__item">
            <form (ngSubmit)="addTask()" #newTaskForm="ngForm">
              <div class="list__item-title">Lataa tehtävä</div>
              <div class="list__item-description">Hae tehtävä koodilla.</div>
              <div class="list__item-error" *ngIf="formError == 'not found'">
                <div class="text">Tehtävää ei löytynyt. Tarkista että koodi on oikein ja yritä uudestaan.</div>
              </div>
              <div class="list__item-footer">
                <div class="list__item-input">
                  <input type="text" class="input--code" required [(ngModel)]="model.code" name="code" #code="ngModel" placeholder="Kirjoita koodi tähän..."
                    (change)="codeChanged()">
                  <button type="submit" class="button--continue" [disabled]="!newTaskForm.form.valid"></button>
                </div>
              </div>
            </form>
          </div>
          <div class="list__item" *ngFor="let t of tasks" [ngClass]="{'is-new': t.id == taskId}">
            <a [routerLink]="['/map', t.id]">
              <div class="list__item-status" *ngIf="t.id == taskId">
                <div class="status">Uusi</div>
              </div>
              <div class="list__item-image"></div>
              <div class="list__item-title">{{t.name}}</div>
              <div class="list__item-detail">{{t.title}} </div>
            </a>
            <div class="list__item-code">
              <div class="code">{{t.code}}</div>
            </div>
          </div>

        </div>
        <div class="list type--tasks" style="display: block;" *ngIf="unusedCodes?.length > 0">
          <div class="list__item-title" style="color: gray;">Käyttämättömät koodit <span style="color: gray; font-size: 0.8rem;">(näytetään vain protossa)</span></div>
          <code>
            <ng-container *ngFor="let code of unusedCodes">{{code}}<br/></ng-container>
          </code>
        </div>
      </div>
      <div class="view__column">
        <div class="profile">
          <div class="profile__item">
            <div class="profile__image"><img src="assets/monster.svg"></div>
          </div>
          <div class="profile__item">
            <label>{{user.username}}</label>
          </div>
          <div class="profile__footer">
            <div class="profile__footer-item"><a (click)="logout()">Kirjaudu ulos</a></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>